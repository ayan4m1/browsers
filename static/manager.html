<html>
    <head>
    <meta charset="UTF-8">
    <title>浏览器管理</title>
    <link media="all" href="alice-full-1.0.0.css" rel="stylesheet">
    <style>
        .wrapper {
            width: 990px;
            margin: 0 auto;
        }
        h1 {
            font-size: 26px;
        }
        .ui-grid-row {
            margin-bottom: 15px;
        }

        .b_action > span {
            cursor: pointer;
        }

        iframe {
            width: 100%;
            height: 180px;
        }

        .busy {
            opacity: 0.4;
            filter: alpha(opacity=40);
        }

    </style>
    <script type="text/javascript" charset="utf-8" src="jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="underscore.js"></script>
    <script type="text/javascript">
    </script>
    <script type="text/javascript">
        _.templateSettings = {
            interpolate : /\{(.+?)\}/g
        };

        var tpl = '<div class="ui-box">' + 
                    '<div class="ui-box-head">' + 
                      '<div class="ui-box-head-border">' + 
                        '<h3 class="ui-box-head-title">{url}</h3>' + 
                      '</div>' + 
                    '</div>' + 
                    '<div class="ui-box-container">' + 
                    '<iframe src="{url}"></iframe>' + 
                    '</div>'

        $(function() {
            var wrapper = $('.wrapper');
            $('#addUrl').on('click', function() {
                addUrl();
            });

            $('#url').keypress(function(data) {
                var charCode = data.charCode;
                if (data.charCode === 13) {
                    addUrl();
                }
            })

            function addUrl(){
                var url = $('#url').val();
                wrapper.append(_.template(tpl, {url: url}));
                $('#url').val('');
            }

            $.ajax('/managers').done(function(data) {
                _.forEach(data, function(url) {
                    wrapper.append(_.template(tpl, {url: url}));
                });
            });

        })
       
    </script>
    </head>
    
    <body>
        <input size="100" id="url" type="text" value="" style="margin:20px"/>  &nbsp;&nbsp; <a href="#" id="addUrl" class="ui-button ui-button-lwhite">添加新页面</a>
        <div class="wrapper">
        </div>
    </body>
</html>
