#!/usr/bin/env node

var fs = require('fs')
var path = require('path')
var commander = require('commander')
var colorful = require('colorful')
var utilx = require('utilx')

var pkg = require('../package')
var logger = require('../lib/logger')
var browsers = require('../')


commander
  .description(pkg.description)
  .option('-v, --version', 'output version number')
  .option('-b, --browsers <s>', 'browsers to open', utilx.split)
  .option('-c, --capture <s>', 'capture URL')
  .option('-r, --restart <n>', 'interval(in hour) to restart')
  .option('-p, --pulse <s>', 'socket to listen the pulse')
  .option('-d, --debug', 'show debug log')
  .on('version', function() {
    console.log('\n  ' + colorful.cyan(pkg.version) + '\n')
    process.exit(0)
  })
  .on('--help', function() {
    console.log(colorful.green('  Examples:'))
    console.log('    $ browsers -c=server.totorojs.org:9999')
    console.log('    $ browsers -c=server.totorojs.org:9999 -b=chrome,firefox')
    console.log('    $ browsers -c=server.totorojs.org:9999 -r=4 -p=server.totorojs.org:9999/__pulse')
    console.log()
  })
  .helpInformation = utilx.cGetHelp(pkg)

commander.parse(process.argv)
 
browsers(utilx.cGetCfg(commander))






